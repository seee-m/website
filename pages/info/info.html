<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Info</title>
    <link rel="stylesheet" href="../../shared.css">
    <link rel="stylesheet" href="info.css">
    <link rel="stylesheet" href="../../directory-component.css">
</head>

<body>
    
    <img id="bgImage" class="background-image" alt="Background">
    <h1 id="overlayText" class="text-overlay"></h1>
    
    <header class="header">
        <div class="box title-box">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <button onclick="window.location.href='../../index.html'" class="home-link">[c-m] info placeholder text goes here <br> more placeholder text</button>
                <br><br><br><br>

                <svg class="svg-logo" viewBox="0 0 1263.1 659.03">
                    <g transform="translate(-.00038379 -.00037995)">
                     <path d="m9.8047 0.0097656c-3.8859 0.2244-6.4393 4.5235-5.3164 20.77 0 0 2.0391 74.786 2.0391 82.986v169.04c-1.0133 16.387-3.0661 80.934-6.1328 91.174-2.0533 7.173 4.0921 13.32 14.332 13.32l104.46-1.0274c-1.0267 20.493-1.0284 262.28-6.1484 281.75 0 0 186.39-5.134 207.89 0v-32.787c-8.2 1.027-118.8 6.1461-126.99 5.1191-11.267 1.027-24.573-1.0272-22.533-32.787v-108.59c-1.0267-7.174 1.0252-14.346 20.479-14.346 0 0 108.56-2.0539 114.69 2.0391v-31.76c-9.2133 1.027-108.55 5.1331-118.79 3.0801-7.1733 0-15.361 3.0799-15.361-15.373v-53.268c16.387-1.027 112.65-10.24 163.85-99.373 24.573-52.254 37.893-141.39-7.1738-202.85-26.627-36.88-57.346-78.893-207.88-73.76-27.653 0-87.053 1.027-100.36 0-3.075-0.76987-6.4372-2.6905-9.3301-3.2246-0.60268-0.11128-1.1851-0.16292-1.7402-0.13086zm109.24 25.199c30.915 0.23925 54.916 3.5056 84.105 11.955 92.173 27.667 93.186 118.84 93.186 151.63 0 56.347-15.359 85.04-24.572 100.4h-153.61c2.0533 7.173 0 53.282 0 63.521h-40.961c-24.573 0-18.439-21.509-18.439-28.682v-265.35c0-34.84 9.227-31.761 26.627-32.787 12.29-0.5135 23.363-0.7692 33.668-0.68945zm77.959 288.57h56.332c-7.1733 10.253-30.733 37.906-80.906 37.906v-21.506c0-10.254-1.0258-16.4 24.574-16.4z"/>
                     <path d="m532.9 1.3125c-5.12 0-6.1322 4.0922-8.1856 8.1992 0 0-151.56 362.67-160.77 369.84 0 0 28.667-5.1196 43 1.0274l45.066-129.09c4.0933-7.173 5.1194-12.293 28.666-12.293h96.268c11.267 0 20.48-7.1739 28.68 17.412l48.119 121.92c12.293-2.053 61.454-4.0924 66.574-1.0254 0 0-160.79-353.45-162.83-368.81-3.08-6.146-7.1736-7.1719-13.32-7.1719zm-6.0156 83.047c2.5145-0.47822 4.8228 3.4312 8.0703 9.9258l45.053 104.24c5.1333 12.814-4.6008 12.294-8.1875 12.814-4.0933 0-33.787 1.0117-38.92 1.0117h-17.4c-5.12 0-32.266-1.5332-32.266-1.5332-14.84 0-11.267-12.799-8.707-16.906l45.574-99.627c2.7475-6.5275 4.8275-9.5538 6.7832-9.9258z"/>
                     <path d="m532.9 279.98c-5.12 0-6.1322 4.0926-8.1856 8.1855 0 0-151.56 362.68-160.77 369.86 0 0 28.667-5.1353 43 1.0117l45.066-129.08c4.0933-7.173 5.1194-12.293 28.666-12.293h96.268c11.267 0 20.48-7.1729 28.68 17.414l48.119 121.92c12.293-2.053 61.454-4.1073 66.574-1.0274 0 0-160.79-353.45-162.83-368.81-3.08-6.147-7.1736-7.1738-13.32-7.1738zm-6.0156 83.043c2.5145-0.4771 4.8228 3.4345 8.0703 9.9297l45.053 104.24c5.1333 12.8-4.6008 12.291-8.1875 12.801-4.0933 0-33.787 1.0273-38.92 1.0273h-17.4c-5.12 0-32.266-1.5352-32.266-1.5352-14.84-1e-5 -11.267-12.813-8.707-16.906l45.574-99.627c2.7475-6.5332 4.8275-9.5586 6.7832-9.9297z"/>
                     <path d="m1075.7 1.3125c-5.12 0-6.1323 4.0922-8.1856 8.1992 0 0-151.56 362.67-160.79 369.84 0 0 28.68-5.1196 43.014 1.0274l45.066-129.09c4.0933-7.173 5.1193-12.293 28.666-12.293h96.268c11.267 0 20.48-7.1739 28.68 17.412l48.119 121.92c12.293-2.053 61.454-4.0924 66.574-1.0254 0 0-160.79-353.45-162.83-368.81-3.08-6.146-7.1736-7.1719-13.32-7.1719zm-6.0157 83.047c2.5145-0.47822 4.8228 3.4312 8.0703 9.9258l45.053 104.24c5.12 12.814-4.6008 12.294-8.1875 12.814-4.0933 0-33.8 1.0117-38.92 1.0117h-17.398c-5.12 0-32.268-1.5332-32.268-1.5332-14.84 0-11.267-12.799-8.707-16.906l45.574-99.627c2.7475-6.5275 4.8275-9.5538 6.7832-9.9258z"/>
                     <path d="m1075.7 279.98c-5.12 0-6.1323 4.0926-8.1856 8.1855 0 0-151.56 362.68-160.79 369.86 0 0 28.68-5.1353 43.014 1.0117l45.066-129.08c4.0933-7.173 5.1193-12.293 28.666-12.293h96.268c11.267 0 20.48-7.1729 28.68 17.414l48.119 121.92c12.293-2.053 61.454-4.1073 66.574-1.0274 0 0-160.79-353.45-162.83-368.81-3.08-6.147-7.1736-7.1738-13.32-7.1738zm-6.0157 83.043c2.5145-0.4771 4.8228 3.4345 8.0703 9.9297l45.053 104.24c5.12 12.8-4.6008 12.291-8.1875 12.801-4.0933 0-33.8 1.0273-38.92 1.0273h-17.398c-5.12 0-32.268-1.5352-32.268-1.5352-14.84-1e-5 -11.267-12.813-8.707-16.906l45.574-99.627c2.7475-6.5332 4.8275-9.5586 6.7832-9.9297z"/>
                     <path d="m789.95 259.48h56.32v-225.39c12.293 0 96.267 2.04 109.57 6.146-2.04-4.613-2.04-28.693 1.0267-35.853-15.36 1.013-85 4.093-116.75 4.093h-40.96c-12.293 0-111.63-1.026-120.84-5.12 4.0933 10.24 0 33.8-1.0267 35.854 11.267-1.027 70.667-3.08 112.65-3.08v223.35"/>
                     <path d="m789.95 659.03h56.32"/>
                     <path d="m786.87 315.83v187.48c0 16.4-2.04 150.6-5.12 154.71h63.493c2.0533-15.374-4.0933-92.214-4.0933-157.77v-145.48c0.507-6.146 0-40.466 0-40.466v-0.52c12.293 0 101.39 2.053 114.69 6.146-2.04-4.6-2.04-28.68 1.0267-35.853-15.36 1.027-85 4.093-116.75 4.093h-40.96c-12.293 0-111.63-1.013-120.84-5.12 4.0933 10.254 0 33.814-1.0267 35.867 11.267-1.027 67.587-3.08 109.57-3.08"/>
                    </g>
                   </svg>

            </div>
            <a href="https://www.are.na/connor-macdonald-aygwd2z45ek" class="nav-link">[★★]</a>
            <a href="https://www.instagram.com/sensoryworks_" class="nav-link">[insta]</a>
            <a href="https://github.com/seee-m" class="nav-link">[github]</a>
            <br><br>
            <button id="directoryToggle" class="nav-link">[directory]</button>
            <button id="rerollButton" class="nav-link">[randomise]</button>
            <a href="mailto:hello@sensory.works" class="nav-link">[email]</a>

        </div>

        <div class="box controls-box">
            <p class="readout" id="fileReadout"></p>
        </div>
    </header>

    <script>
        const TYPING_SPEED = 50; // milliseconds per character
        const random = arr => arr[Math.floor(Math.random() * arr.length)];
        
        // Random selection excluding last pick
        function randomExcluding(array, exclude) {
            if (array.length <= 1) return array[0];
            let item;
            do {
                item = array[Math.floor(Math.random() * array.length)];
            } while (item === exclude);
            return item;
        }
        
        let currentSlogan = '';
        let currentImageFile = '';
        let colorPairs = [];
        let slogans = [];
        let images = [];
        let typewriterTimeout;
        let lastImage = null;
        let lastSlogan = null;
        let lastColorPair = null;

        async function loadColors() {
            try {
                const response = await fetch('colors.txt');
                const text = await response.text();
                colorPairs = text.split('\n')
                    .filter(line => line.trim())
                    .map(line => {
                        const [fill, stroke] = line.split(',').map(c => c.trim());
                        return { fill, stroke };
                    });
            } catch (error) {
                console.error('Error loading colors:', error);
            }
        }

        async function loadImages() {
            try {
                const response = await fetch('/media/background/background.txt');
                const text = await response.text();
                images = text.split('\n').filter(line => line.trim()).map(img => `/media/background/${img}`);
            } catch (error) {
                console.error('Error loading images:', error);
            }
        }

        async function loadSlogans() {
            try {
                const response = await fetch('slogans.txt');
                const text = await response.text();
                slogans = text.split('\n').filter(line => line.trim());
            } catch (error) {
                console.error('Error loading slogans:', error);
            }
        }

        // Typewriter effect
        function typeWriter(text, element) {
            // Clear any existing timeout
            if (typewriterTimeout) {
                clearTimeout(typewriterTimeout);
            }
            
            element.textContent = '';
            let index = 0;
            
            function type() {
                if (index < text.length) {
                    element.textContent += text.charAt(index);
                    index++;
                    typewriterTimeout = setTimeout(type, TYPING_SPEED);
                }
            }
            
            type();
        }

        function applyColors(colors) {
    const textElement = document.getElementById('overlayText');
    const titleBox = document.querySelector('.title-box');
    
    textElement.style.color = colors.fill;
    textElement.style.webkitTextStroke = `0.018em ${colors.stroke}`;
    titleBox.style.backgroundColor = colors.fill;
    
}

        function randomize() {
            if (colorPairs.length > 0) {
                const colors = randomExcluding(colorPairs, lastColorPair);
                lastColorPair = colors;
                applyColors(colors);
            }
            
            if (images.length > 0) {
                const imagePath = randomExcluding(images, lastImage);
                lastImage = imagePath;
                document.getElementById('bgImage').src = imagePath;
                currentImageFile = imagePath.replace('/media/background/', '');
                
                // Use typewriter effect for filename
                const readoutElement = document.getElementById('fileReadout');
                typeWriter(currentImageFile, readoutElement);
            }
            
            if (slogans.length > 0) {
                const slogan = randomExcluding(slogans, lastSlogan);
                lastSlogan = slogan;
                displayText(slogan);
            }
        }

        function displayText(slogan) {
            currentSlogan = slogan;
            const textElement = document.getElementById('overlayText');
            
            // On mobile, split into one word per line for better sizing
            if (window.innerWidth <= 600) {
                textElement.innerHTML = slogan.split(' ').join('<br>');
                
                // Position vertically centered between nav-box bottom and screen bottom
                setTimeout(() => {
                    const navBox = document.querySelector('.nav-box');
                    if (navBox) {
                        const navBoxRect = navBox.getBoundingClientRect();
                        const navBoxBottom = navBoxRect.bottom;
                        const screenBottom = window.innerHeight;
                        const centerPoint = navBoxBottom + (screenBottom - navBoxBottom) / 2;
                        
                        textElement.style.top = centerPoint + 'px';
                    }
                    
                    const maxHeight = window.innerHeight * 0.6; // 60vh max
                    const maxWidth = window.innerWidth - 48; // Account for 1.5rem padding on each side
                    
                    // Reset to let clamp work
                    textElement.style.fontSize = '';
                    
                    // If it overflows height or width, scale it down
                    let currentSize = parseFloat(getComputedStyle(textElement).fontSize);
                    const minSize = 32; // 2rem minimum
                    
                    while ((textElement.scrollHeight > maxHeight || textElement.scrollWidth > maxWidth) && currentSize > minSize) {
                        currentSize -= 2;
                        textElement.style.fontSize = currentSize + 'px';
                    }
                }, 50);
            } else {
                textElement.style.fontSize = '';
                textElement.style.top = '';
                textElement.textContent = slogan;
            }
        }

        async function init() {
            await Promise.all([loadColors(), loadImages(), loadSlogans()]);
            randomize();
        }

        document.getElementById('rerollButton').addEventListener('click', randomize);

        window.addEventListener('resize', () => {
            clearTimeout(window.resizeTimeout);
            window.resizeTimeout = setTimeout(() => {
                if (currentSlogan) displayText(currentSlogan);
            }, 150);
        });

        init();
    </script>
    <script src="../../directory-component.js"></script>
</body>
</html>